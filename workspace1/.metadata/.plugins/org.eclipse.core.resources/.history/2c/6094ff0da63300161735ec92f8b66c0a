package com.oocl.mnlbc.group3;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Scanner;

import com.oocl.mnlbc.group3.util.Validators;

public class Shopping {

	static Customer cust;
	static BufferedReader input;

	public static void main(String[] args) throws IOException {
		input = new BufferedReader(new InputStreamReader(System.in));
		System.out.println("Welcome to Kanen Online Shopping!");
		String option;
		registerUser();

		do {
			displayOptions();
			option = readOption();
			switch (option) {
			case "1":
				break;
			case "2":
				displayProduct();
				break;
			case "3":
				checkBalance();
				break;
			case "4":
				addBalance();
				break;
			case "5":
				System.out.println("Logged out!");
				System.exit(0);
				break;
			default:
				break;
			}
			System.out.println("");
		} while (!option.equals("5"));

	}

	public static void registerUser() throws IOException {
		Validators validate = new Validators();
		System.out.println("Register now!");

		String firstName;
		String lastName;
		String userName;
		String emailAddress;
		String mobileNumber;
		double balance;
		System.out.print("Enter your first name: ");
		firstName = input.readLine();
		System.out.print("Enter your last name: ");
		lastName = input.readLine();
		System.out.print("Enter a user name: ");
		userName = input.readLine();
		do {
			System.out.print("Enter your email address: ");
			emailAddress = input.readLine();
		} while (!validate.checkEmail(emailAddress));
		do {
			System.out.print("Enter your mobile number: ");
			mobileNumber = input.readLine();
		} while (!validate.checkPhone(mobileNumber));

		System.out.print("Enter your balance: ");
		balance = Double.parseDouble(input.readLine());
		cust = new Customer(1, firstName, lastName, userName, emailAddress,
				mobileNumber, balance);

		System.out.println();
		System.out.println(cust.toString());
		System.out.println();
	}

	public static void placeOrder() {

	}

	public static void addBalance() {
		System.out.print("How much balance will you add?: $");
		Scanner input = new Scanner(System.in);
		int amount = 0;
		amount = input.nextInt();

		cust.setBalance(amount + cust.getBalance());
		System.out.println("Your new balance is: " + cust.getBalance());

	}

	public static void displayOptions() {

		System.out.println("Please select transaction: [1-5]");
		System.out.println("[1]  Shop Now!");
		System.out.println("[2]  Check our products!");
		System.out.println("[3]  Check your balance.");
		System.out.println("[4]  Deposit additional balance.");
		System.out.println("[5]  Logout.");

	}

	public static String readOption() throws IOException {
		boolean inputValid = false;
		String choiceStr = "";
		do {
			System.out.print("Enter your Transaction No.: ");
			choiceStr = input.readLine();
			if (choiceStr.equals("1") || choiceStr.equals("2")
					|| choiceStr.equals("3") || choiceStr.equals("4")
					|| choiceStr.equals("5")) {
				inputValid = true;
			} else {
				System.out
						.println("Please select a number between [1-5] only.");
			}
		} while (!inputValid);

		return choiceStr;

	}

	public static void checkBalance() {

		System.out.println("Current Balance: " + cust.getBalance());
	}

	public static void displayProduct() {
		Warehouse warehouse = new Warehouse();
		warehouse.listProducts();

	}
	
	public static void shopNow(){
		Warehouse warehouse = new Warehouse();
		warehouse.listProducts();
		
		System.out.println("Choose a product");
		
		
	}

}
